<!doctype HTML>
<html>
<head>
<meta charset="UTF-8" />
<title>Inspector</title>
<script src="js/inspector.js"></script>
<link href="styles.css" rel="stylesheet" />
</head>
<body>
<form autocomplete="off" onsubmit="return false;">
    <input type="text" id="input" autofocus placeholder="Shortcuts:RETURN (Eval js), CTRL+RETURN (Exec HTML), SHIFT+RETURN (Eval but don't inspect), CTRL+Backspace (Clear), CTRL+SHIFT+Backspace (Clear history)" />
</form>
<div id="output"></div>
<script>
!function(){
  var params = inspector.getParams(location.search.slice(1));
  inspector.setDomObjects({input: document.getElementById('input'), output: document.getElementById('output')});
  if(location.search.length) {
    if(params.blind) {
      inspector.setCallbacks({sendRootHTML: function(objName, html){
        var xhr = new XMLHttpRequest();
        html = '<div class="output"><div>'+html+'</div></div>';
        xhr.open('POST', 'save.php', true);
        xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
        xhr.send('objName='+encodeURIComponent(objName)+'&html='+encodeURIComponent(html));
      }});
    }
    if(params.html) {
      inspector.inspect(params.html, true);
    }
    window.onload = function(){
      if(typeof params.input === 'string' && params.input.length) {
        inspector.inspect(params.input, false, false, params);
      }
    };
  } else if(location.hash.length) {
    inspector.inspect(location.hash.slice(1));
  }
}();
</script>
</body>
</html>
